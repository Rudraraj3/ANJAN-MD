const _0x295278=_0x52ea;function _0x1533(){const _0x3f484d=['33dSIXom','end','toFormat','randomBytes','exports','writeUIntLE','unlinkSync','concat','-vcodec','webp','libwebp','utf-8','readFileSync','exif','writeFileSync','https://github.com/Afx-Abu','.jpg','Image','load','join','-vsync','readUIntLE','10040832ECVyJb','-preset','packname','stringify','toString','569030QFfaCk','crypto','categories','832GGkKSY','save','17208210usezHY','addOutputOptions','length','fluent-ffmpeg','00:00:05','.webp','from','-ss','161712JVOhQV','7284alLYsk','-vf','10ytgCPk','2406368CUtFul','-an','196DtkmsY','author','./temp','2191764IhMQrU'];_0x1533=function(){return _0x3f484d;};return _0x1533();}(function(_0x44eec5,_0x4df4ab){const _0x6eb18c=_0x52ea,_0x259e9b=_0x44eec5();while(!![]){try{const _0x25be39=-parseInt(_0x6eb18c(0xe4))/0x1+parseInt(_0x6eb18c(0xe7))/0x2*(-parseInt(_0x6eb18c(0xf2))/0x3)+-parseInt(_0x6eb18c(0xf5))/0x4+parseInt(_0x6eb18c(0xf4))/0x5*(-parseInt(_0x6eb18c(0xfa))/0x6)+-parseInt(_0x6eb18c(0xf7))/0x7*(parseInt(_0x6eb18c(0xf1))/0x8)+-parseInt(_0x6eb18c(0xdf))/0x9+-parseInt(_0x6eb18c(0xe9))/0xa*(-parseInt(_0x6eb18c(0xfb))/0xb);if(_0x25be39===_0x4df4ab)break;else _0x259e9b['push'](_0x259e9b['shift']());}catch(_0x42abb5){_0x259e9b['push'](_0x259e9b['shift']());}}}(_0x1533,0x8b0dd));function _0x52ea(_0x573f7b,_0x3ec463){const _0x153332=_0x1533();return _0x52ea=function(_0x52ea47,_0x4804c2){_0x52ea47=_0x52ea47-0xd9;let _0x437321=_0x153332[_0x52ea47];return _0x437321;},_0x52ea(_0x573f7b,_0x3ec463);}const fs=require('fs'),Crypto=require(_0x295278(0xe5)),ff=require(_0x295278(0xec)),webp=require('node-webpmux'),path=require('path');async function imageToWebp(_0x8200af){const _0x5094e2=_0x295278,_0x24f4a9=path['join'](_0x5094e2(0xf9),Crypto[_0x5094e2(0xfe)](0x6)['readUIntLE'](0x0,0x6)[_0x5094e2(0xe3)](0x24)+_0x5094e2(0xee)),_0x36736a=path[_0x5094e2(0xdc)](_0x5094e2(0xf9),Crypto[_0x5094e2(0xfe)](0x6)['readUIntLE'](0x0,0x6)['toString'](0x24)+_0x5094e2(0xd9));fs[_0x5094e2(0x109)](_0x36736a,_0x8200af),await new Promise((_0xd89ef8,_0xb6b764)=>{const _0x311b3f=_0x5094e2;ff(_0x36736a)['on']('error',_0xb6b764)['on'](_0x311b3f(0xfc),()=>_0xd89ef8(!![]))[_0x311b3f(0xea)]([_0x311b3f(0x103),_0x311b3f(0x105),_0x311b3f(0xf3),'scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse'])[_0x311b3f(0xfd)]('webp')[_0x311b3f(0xe8)](_0x24f4a9);});const _0x466167=fs[_0x5094e2(0x107)](_0x24f4a9);return fs[_0x5094e2(0x101)](_0x24f4a9),fs['unlinkSync'](_0x36736a),_0x466167;}async function videoToWebp(_0x3d9430){const _0xf3a5ed=_0x295278,_0x412a13=path[_0xf3a5ed(0xdc)](_0xf3a5ed(0xf9),Crypto[_0xf3a5ed(0xfe)](0x6)[_0xf3a5ed(0xde)](0x0,0x6)[_0xf3a5ed(0xe3)](0x24)+'.webp'),_0x59323e=path['join'](_0xf3a5ed(0xf9),Crypto[_0xf3a5ed(0xfe)](0x6)['readUIntLE'](0x0,0x6)[_0xf3a5ed(0xe3)](0x24)+'.mp4');fs[_0xf3a5ed(0x109)](_0x59323e,_0x3d9430),await new Promise((_0x151f82,_0x2240a2)=>{const _0x341a6c=_0xf3a5ed;ff(_0x59323e)['on']('error',_0x2240a2)['on']('end',()=>_0x151f82(!![]))[_0x341a6c(0xea)]([_0x341a6c(0x103),_0x341a6c(0x105),_0x341a6c(0xf3),'scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','-loop','0',_0x341a6c(0xf0),'00:00:00','-t',_0x341a6c(0xed),_0x341a6c(0xe0),'default',_0x341a6c(0xf6),_0x341a6c(0xdd),'0'])[_0x341a6c(0xfd)](_0x341a6c(0x104))[_0x341a6c(0xe8)](_0x412a13);});const _0x4373d0=fs['readFileSync'](_0x412a13);return fs['unlinkSync'](_0x412a13),fs['unlinkSync'](_0x59323e),_0x4373d0;}async function writeExifImg(_0x20f99d,_0x37c971){const _0x9367ad=_0x295278;let _0x3170a0=await imageToWebp(_0x20f99d);const _0x54feef=path[_0x9367ad(0xdc)]('./temp',Crypto[_0x9367ad(0xfe)](0x6)[_0x9367ad(0xde)](0x0,0x6)['toString'](0x24)+'.webp'),_0x32bb82=path[_0x9367ad(0xdc)](_0x9367ad(0xf9),Crypto[_0x9367ad(0xfe)](0x6)[_0x9367ad(0xde)](0x0,0x6)[_0x9367ad(0xe3)](0x24)+_0x9367ad(0xee));fs[_0x9367ad(0x109)](_0x54feef,_0x3170a0);if(_0x37c971[_0x9367ad(0xe1)]||_0x37c971[_0x9367ad(0xf8)]){const _0xc1298f=new webp[(_0x9367ad(0xda))](),_0x44bd79={'sticker-pack-id':'https://github.com/Afx-Abu','sticker-pack-name':_0x37c971[_0x9367ad(0xe1)],'sticker-pack-publisher':_0x37c971['author'],'emojis':_0x37c971[_0x9367ad(0xe6)]?_0x37c971[_0x9367ad(0xe6)]:['']},_0x2279cf=Buffer[_0x9367ad(0xef)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x1c67bd=Buffer[_0x9367ad(0xef)](JSON[_0x9367ad(0xe2)](_0x44bd79),_0x9367ad(0x106)),_0x127a5d=Buffer[_0x9367ad(0x102)]([_0x2279cf,_0x1c67bd]);return _0x127a5d[_0x9367ad(0x100)](_0x1c67bd[_0x9367ad(0xeb)],0xe,0x4),await _0xc1298f[_0x9367ad(0xdb)](_0x54feef),fs[_0x9367ad(0x101)](_0x54feef),_0xc1298f[_0x9367ad(0x108)]=_0x127a5d,await _0xc1298f[_0x9367ad(0xe8)](_0x32bb82),_0x32bb82;}}async function writeExifVid(_0x219381,_0x1fc17c){const _0xae15f0=_0x295278;let _0x2035e7=await videoToWebp(_0x219381);const _0x35c571=path['join'](_0xae15f0(0xf9),Crypto[_0xae15f0(0xfe)](0x6)[_0xae15f0(0xde)](0x0,0x6)[_0xae15f0(0xe3)](0x24)+'.webp'),_0x16e7f1=path[_0xae15f0(0xdc)]('./temp',Crypto[_0xae15f0(0xfe)](0x6)[_0xae15f0(0xde)](0x0,0x6)[_0xae15f0(0xe3)](0x24)+'.webp');fs['writeFileSync'](_0x35c571,_0x2035e7);if(_0x1fc17c['packname']||_0x1fc17c[_0xae15f0(0xf8)]){const _0x4f3e40=new webp[(_0xae15f0(0xda))](),_0x53bc74={'sticker-pack-id':_0xae15f0(0x10a),'sticker-pack-name':_0x1fc17c['packname'],'sticker-pack-publisher':_0x1fc17c['author'],'emojis':_0x1fc17c['categories']?_0x1fc17c['categories']:['']},_0x46605b=Buffer[_0xae15f0(0xef)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x2626dd=Buffer[_0xae15f0(0xef)](JSON[_0xae15f0(0xe2)](_0x53bc74),_0xae15f0(0x106)),_0x321a2e=Buffer[_0xae15f0(0x102)]([_0x46605b,_0x2626dd]);return _0x321a2e['writeUIntLE'](_0x2626dd[_0xae15f0(0xeb)],0xe,0x4),await _0x4f3e40[_0xae15f0(0xdb)](_0x35c571),fs['unlinkSync'](_0x35c571),_0x4f3e40['exif']=_0x321a2e,await _0x4f3e40[_0xae15f0(0xe8)](_0x16e7f1),_0x16e7f1;}}async function writeExifWebp(_0xbad210,_0xabd4d3){const _0xbe965f=_0x295278,_0x3308ff=path[_0xbe965f(0xdc)](_0xbe965f(0xf9),Crypto['randomBytes'](0x6)[_0xbe965f(0xde)](0x0,0x6)['toString'](0x24)+'.webp'),_0x3eb13c=path['join'](_0xbe965f(0xf9),Crypto['randomBytes'](0x6)[_0xbe965f(0xde)](0x0,0x6)[_0xbe965f(0xe3)](0x24)+_0xbe965f(0xee));fs[_0xbe965f(0x109)](_0x3308ff,_0xbad210);if(_0xabd4d3['packname']||_0xabd4d3['author']){const _0x58b48a=new webp[(_0xbe965f(0xda))](),_0x36a055={'sticker-pack-id':_0xbe965f(0x10a),'sticker-pack-name':_0xabd4d3[_0xbe965f(0xe1)],'sticker-pack-publisher':_0xabd4d3[_0xbe965f(0xf8)],'emojis':_0xabd4d3[_0xbe965f(0xe6)]?_0xabd4d3[_0xbe965f(0xe6)]:['']},_0x5e409d=await Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x2da57d=await Buffer['from'](JSON['stringify'](_0x36a055),_0xbe965f(0x106)),_0xcece52=await Buffer['concat']([_0x5e409d,_0x2da57d]);return await _0xcece52['writeUIntLE'](_0x2da57d['length'],0xe,0x4),await _0x58b48a['load'](_0x3308ff),fs['unlinkSync'](_0x3308ff),_0x58b48a['exif']=_0xcece52,await _0x58b48a[_0xbe965f(0xe8)](_0x3eb13c),_0x3eb13c;}}module[_0x295278(0xff)]={'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExifWebp':writeExifWebp};
